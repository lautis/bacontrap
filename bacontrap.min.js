/* Bacontrap v0.3.3. Copyright 2013 Ville Lautanala. https://raw.githubusercontent.com/lautis/bacontrap/master/LICENSE.txt */!function(t,e){"function"==typeof define&&define.amd?define(["bacon","jquery"],e):"object"==typeof exports?module.exports=e(require("baconjs"),require("jquery")):t.Bacontrap=e(t.Bacon,t.jQuery)}(this,function(t,e){return function(){var n,r,a,o,i,u,l,s,c,f,p=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};return r=t,n=e,f=function(t){var e;return e=t.which,a.map[e]||String.fromCharCode(e).toLowerCase()},o=function(t,e){return function(n){return t(e,n)}},a={input:{special:n(document).asEventStream("keydown").filter(function(t){var e;return e=a.map[t.which],e&&p.call(a.modifiers,e)<0}),keypress:n(document).asEventStream("keypress")},defaults:{timeout:1500,global:!1},aliases:{cmd:"meta",command:"meta",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl",option:"alt"},map:{8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},groups:{num:function(){var t,e;for(e=[],i=t=0;9>=t;i=++t)e.push(i.toString());return e}()},modifiers:["shift","alt","meta","ctrl"]},s=function(t,e){var n,r,o,i;for(i=a.modifiers,r=0,o=i.length;o>r;r++)if(n=i[r],c(n,e)!==p.call(t,n)>=0)return!1;return!0},c=function(t,e){var n,r,a;return a=e[t+"Key"]||f(e)===t,"keypress"===e.type&&"shift"===t?(r=f(e),n=r.toLowerCase()!==r.toUpperCase(),n&&a):a},u=function(t,e){return a.groups[t]?a.groups[t].indexOf(f(e))>=0:f(e)===t},l=function(t,e){var n,r,o;for(r=0,o=t.length;o>r;r++)if(n=t[r],p.call(a.modifiers,n)<0&&!u(n,e))return!1;return!0},a.match=function(t,e){return l(t,e)&&s(t,e)},a.notInput=function(t){var e,n;return e=t.target||t.srcElement||{},n=e.tagName,!("INPUT"===n||"SELECT"===n||"TEXTAREA"===n||e.isContentEditable)},a.trap=function(t,e,n,i){var u,l;return null==n&&(n=a.defaults.timeout),null==i&&(i=[]),u=e[i.length],l=0===i.length?t:t.take(1).takeUntil(r.later(n,!0)),l.filter(o(a.match,u)).flatMap(function(o){return i.length+1===e.length?r.once(o):a.trap(t,e,n,i.concat(o))})},a.parse=function(t){var e,n,r,o,i,u,l,s,c,f,p;for(n=function(t){var e;return(e=a.aliases[t])?[e]:1===t.length&&t.toLowerCase()!==t?["shift",t.toLowerCase()]:[t]},c=t.split(" "),p=[],i=0,l=c.length;l>i;i++){for(o=c[i],e=[],f=o.split("+"),u=0,s=f.length;s>u;u++)r=f[u],e.push.apply(e,n(r));p.push(e)}return p},a.bind=function(t,e){var n,o,i,u,l;return null==e&&(e={}),o=r.mergeAll([a.input.keypress,a.input.special]),n=e.global||a.defaults.global?o:o.filter(a.notInput),l=function(){var r,o,l,s;for(l=[].concat(t),s=[],r=0,o=l.length;o>r;r++)u=l[r],i=a.parse(u),s.push(a.trap(n,i,e.timeout));return s}(),r.mergeAll(l)},module.exports=a,module.exports}()});